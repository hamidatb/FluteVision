---
import BaseLayout from '../layouts/BaseLayout.astro';
import CameraFeed from '../components/CameraFeed.astro';

import '../css/practice.css';
---

<BaseLayout selectedPage="practice">
    <div id="practice-container">
        <!-- Practice Header Bar -->
        <div class="practice-header">
            <div class="header-left">
                <button id="startBtn" class="practice-btn start-btn" disabled>
                    <span class="btn-icon">‚ñ∂</span> START
                </button>
                <button id="stopBtn" class="practice-btn stop-btn" disabled>
                    <span class="btn-icon">‚èπ</span> STOP
                </button>
            </div>
            
            <div class="header-center">
                <div class="practice-title">PRACTICE MODE</div>
            </div>
            
            <div class="header-right">
                <div class="timer-display" id="timer">00:00</div>
            </div>
        </div>
        
        <!-- Practice Main Area -->
        <div class="practice-main">
            <div class="practice-grid">
                <!-- Camera Section -->
                <div class="camera-section">
                    <div class="section-header">
                        <span class="section-icon">üìπ</span>
                        <h3>CAMERA</h3>
                        <button id="landmarkToggle" class="landmark-toggle-btn" title="Toggle hand landmarks">
                            <span class="toggle-icon">üìç</span>
                        </button>
                    </div>
                    <CameraFeed videoId="practiceVideo" />
                    <div id="statusMessage" class="status-message info">
                        Initializing...
                    </div>
                </div>
            
                <!-- Info Panel -->
                <div class="info-panel">
                    <!-- Current Detection -->
                    <div class="info-card">
                        <div class="section-header">
                            <span class="section-icon">üéµ</span>
                            <h3>CURRENT NOTE</h3>
                        </div>
                        <div class="current-gesture" id="currentGesture">-</div>
                        <div class="confidence-display">
                            <div class="confidence-label">CONFIDENCE</div>
                            <div class="confidence-bar">
                                <div class="confidence-fill" id="confidenceFill">0%</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Target Practice -->
                    <div class="info-card">
                        <div class="section-header">
                            <span class="section-icon">üéØ</span>
                            <h3>TARGET</h3>
                        </div>
                        <div class="target-section">
                            <div class="target-label">PRACTICE:</div>
                            <div class="target-gesture" id="targetGesture">-</div>
                            <select id="targetSelector" class="target-selector">
                                <option value="">ALL NOTES</option>
                            </select>
                            
                        </div>
                    </div>
                    
                    
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="../js/practice/PracticeMode.js"></script>
    <script src="../js/camera.js"></script>
</BaseLayout>
